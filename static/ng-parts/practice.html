<div class="loader" ng-hide="flashcard"></div>

<div id="image-strip" ng-cloak ng-show="flashcard">
    <img id="img" ng-src='{{image_url(flashcard.selected_image, "big")}}'/>
</div>
<div id="select-left" ng-cloak ng-show="flashcard">
    <div
            ng-hide="flashcard.context.content.length == 1"
            ng-repeat="image in flashcard.context.content"
            ng-click="flashcard.selected_image = image"
            ng-class="{'selected': flashcard.selected_image == image}"
            >
        <img ng-src='{{image_url(image, "small")}}' />
    </div>
</div>
<br/>

<div class="columns large-8 large-offset-2" keypress-events>
<div ng-hide="answer.answered || !flashcard" id="answer">
    <h3>What is this plant?</h3>

    <div id="input">
        <form ng-submit="submit()">
        <input
                focus-me="!answer.answered && flashcard"
                type="text"
                class="fancy"
                ng-class="{'selected': answer.meta}"
                ng-model="answer.term"
                typeahead="plant as plant.name for plant in getPlantNames($viewValue)"
                ng-change="typeheadHiddenCount = null"
                typeahead-loading="loadingPlants"
                typeahead-editable="false"
                typeahead-min-length="2"
                typeahead-wait-ms="300"
                typeahead-template-url="static/ng-parts/dropdown.html"
                />
        </form>
        <div id="links" ng-show="answer.term" >
            <div class="google_icon" ng-click="searchGoogle(answer.term)" stop-event><i class="fi-magnifying-glass"></i></div>
            <div class="web_icon" ng-click="openWeb(answer.term)" stop-event><i ng-class="webIcon(answer.term)"></i></div>
        </div>
        <span ng-show="answer.term" ng-click="answer.term = null; typeheadHiddenCount =null;" class="fi-x"></span>
        <div ng-show="loadingPlants" class="loader"></div>
        <div class="in-text" ng-show="typeheadHiddenCount > 0 && !loadingPlants && !answer.term">+{{ typeheadHiddenCount }} more plants, make your search more specific</div>
    </div>
    <div class="button uppercase" ng-disabled="!answer.term" ng-click="submit()">Answer</div>
    <span class="shadow uppercase">&nbsp;&nbsp;&nbsp;or&nbsp;&nbsp;&nbsp;
        <a href="" class="shadow-link" ng-click="skip()">show correct answer</a></span>
</div>

<div ng-cloak ng-show="answer.closed && answer.correct && answer.answered">
    <h4><div class="fi-check"></div>Yes, correct!</h4>
    <p>
        <div class="google_icon" ng-click="searchGoogle(flashcard.term)" stop-event><i class="fi-magnifying-glass"></i></div>
        <div class="web_icon" ng-click="openWeb(flashcard.term)" stop-event><i ng-class="webIcon(flashcard.term)"></i></div>
        It is <strong>{{ flashcard.term.name }}</strong>
    </p>
    <p><i>{{ flashcard.term.interesting }}</i></p>
    <div class="button uppercase medium" ng-click="next_plant()" next-action="answer.closed && answer.correct && answer.answered" ng-hide="set.current + 1 == set.length" onkeydown="if (event.keyCode == 13) this.click()">Next plant</div>
    <div class="button uppercase medium" ng-click="next_plant()" ng-cloak ng-show="set.current + 1 == set.length">Finish</div>
</div>

<div ng-cloak ng-show="answer.answered && !answer.closed && !answer.correct">
    <h4><div class="fi-x"></div>Unfortunately no.</h4>
    <p>This is not <strong>{{ answer.term.name }}</strong></p>
    <div class="button uppercase" next-action="answer.answered && !answer.closed && !answer.correct" ng-click="try_again()">Try again</div>
    <span class="shadow uppercase">&nbsp;&nbsp;&nbsp;or&nbsp;&nbsp;&nbsp;
        <a href="" class="shadow-link" ng-click="skip()">show correct answer</a></span>
</div>

<div ng-cloak ng-show="answer.closed && !answer.correct">
    <h4><div class="fi-x"></div>No worries, here is the answer.</h4>
    <p>
        <div class="google_icon" ng-click="searchGoogle(flashcard.term)" stop-event><i class="fi-magnifying-glass"></i></div>
        <div class="web_icon" ng-click="openWeb(flashcard.term)" stop-event><i ng-class="webIcon(flashcard.term)"></i></div>
        It is <strong>{{ flashcard.term.name }}</strong>
    </p>
    <p><i>{{ flashcard.term.interesting }}</i></p>
    <div class="button uppercase medium" next-action="answer.closed && !answer.correct" ng-click="next_plant()" ng-hide="set.current + 1 == set.length">Next plant</div>
    <div class="button uppercase medium" ng-click="next_plant()" ng-cloak ng-show="set.current + 1 == set.length">Finish</div>
</div>
</div>